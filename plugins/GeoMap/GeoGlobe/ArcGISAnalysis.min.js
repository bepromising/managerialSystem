Geo.Analysis.AreasAndLengthsParameters=Geo.Class({areaUnit:null,lengthUnit:null,polygons:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){for(var a={sr:this.inSr},b=this.polygons,c=[],d=0;d<b.length;d++){var e=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polygon(b[d]);c.push(e)}b=(new Geo.Format.JSON).write(c);a.polygons=b;if(this.lengthUnit)a.lengthUnit=this.lengthUnit;if(this.areaUnit)a.areaUnit=(new Geo.Format.JSON).write({areaUnit:this.areaUnit});return a}});
Geo.Analysis.BufferParameters=Geo.Class({bufferSpatialReference:null,distances:null,geodesic:!1,geometries:null,outSpatialReference:null,unionResults:!1,unit:null,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},b=this.distances,c=this.outSpatialReference,d=this.bufferSpatialReference,e=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries),e=(new Geo.Format.JSON).write(e);a.geometries=e;a.inSR=4326;
if(b)a.distances=b.join(",");if(c)a.outSR=c;if(d)a.bufferSR=d;return a}});
Geo.Analysis.DensifyParameters=Geo.Class({geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={sr:this.inSr};if(this.geometries&&this.geometries.length>0){var b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries),b=(new Geo.Format.JSON).write(b);a.geometries=b}if(this.geodesic)a.geodesic=this.geodesic;if(this.lengthUnit)a.lengthUnit=this.lengthUnit;if(this.maxSegmentLength)a.maxSegmentLength=
this.maxSegmentLength;return a}});
Geo.Analysis.DistanceParameters=Geo.Class({distanceUnit:null,geometry1:null,geometry2:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={sr:this.inSr};if(this.geometry1){var b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometry1),b=(new Geo.Format.JSON).write(b);a.geometry1=b}if(this.geometry2)b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometry2),b=(new Geo.Format.JSON).write(b),a.geometry2=b;if(this.distanceUnit)a.distanceUnit=this.distanceUnit;
return a}});Geo.Analysis.GeneralizeParameters=Geo.Class({deviationUnit:null,geometries:null,maxDeviation:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={sr:this.inSr||4326};if(this.geometries){var b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries,this.inSr),b=(new Geo.Format.JSON).write(b);a.geometries=b}if(this.deviationUnit)a.deviationUnit=this.deviationUnit;if(this.maxDeviation)a.maxDeviation=this.maxDeviation;return a}});
Geo.Analysis.GeometryService=Geo.Class({url:null,initialize:function(a){this.url=a},areasAndLengths:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/areasAndLengths",params:a,callback:b,errback:c})},autoComplete:function(a,b,c,d,e){c={sr:c||4326};if(a){for(var f=[],g=0;g<a.length;g++){var h=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polygon(a[g]);f.push(h)}a=(new Geo.Format.JSON).write(f);c.polygons=a}if(b){f=[];for(g=0;g<b.length;g++)a=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polyline(b[g]),
f.push(a);a=(new Geo.Format.JSON).write(f);c.polylines=a}this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/autoComplete",params:c,callback:function(a){a.geometryType="esriGeometryPolygon";a=Geo.Analysis.Util.esriObjToGeoGeometry(a);d({geometries:a})},errback:e})},buffer:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/buffer",params:a,callback:function(a){a.geometryType="esriGeometryPolygon";a=Geo.Analysis.Util.esriObjToGeoGeometry(a);b({geometries:a})},
errback:c})},convexHull:function(a,b,c,d){b={sr:b||4326};if(a)a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a),a=(new Geo.Format.JSON).write(a),b.geometries=a;this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/convexHull",params:b,callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometryMapping[a.geometryType](a.geometry);c(a)},errback:d})},cut:function(a,b,c,d,e){c={sr:c||4326};if(a)a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a),a=(new Geo.Format.JSON).write(a),c.target=a;if(b)b=
Geo.Analysis.Util.geoGeometryToEsriObjMapping.polyline(b),b=(new Geo.Format.JSON).write(b),c.cutter=b;this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/cut",params:c,callback:function(a){var b=Geo.Analysis.Util.esriObjToGeoGeometry(a);d({cutIndexes:a.cutIndexes,geometries:b})},errback:e})},difference:function(a,b,c,d,e){c={sr:c||4326};if(a)a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a),a=(new Geo.Format.JSON).write(a),c.geometries=a;if(b)b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(b),
b=(new Geo.Format.JSON).write(b),c.geometry=b;this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/difference",params:c,callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);d({geometries:a})},errback:e})},distance:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/distance",params:a,callback:b,errback:c})},generalize:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/generalize",params:a,callback:function(a){a=
Geo.Analysis.Util.esriObjToGeoGeometry(a);b({geometries:a})},errback:c})},intersect:function(a,b,c,d,e){a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a,4326);a=(new Geo.Format.JSON).write(a);b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(b,4326);b=(new Geo.Format.JSON).write(b);this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/intersect",params:{geometries:a,geometry:b,sr:c||4326},callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);d({geometries:a})},errback:e})},labelPoints:function(a,
b,c,d){for(var e=[],f=0;f<a.length;f++){var g=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polygon(a[f]);e.push(g)}a={polygons:(new Geo.Format.JSON).write(e),sr:b||4326};this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/labelPoints",params:a,callback:function(a){var b=[];if(Geo.Util.isArray(a.labelPoints))for(var d=0;d<a.labelPoints.length;d++)b.push(Geo.Analysis.Util.esriObjToGeoGeometryMapping.point(a.labelPoints[d]));c({labelPoints:b})},errback:d})},lengths:function(a,b,c){a=a.toJson();
this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/lengths",params:a,callback:b,errback:c})},offset:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/offset",params:a,callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);b({geometries:a})},errback:c})},project:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/project",params:a,callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);b({geometries:a})},
errback:c})},relation:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/relation",params:a,callback:b,errback:c})},densify:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/densify",params:a,callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);b({geometries:a})},errback:c})},reshape:function(a,b,c,d,e){c={sr:c||4326};if(a)a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a),a=(new Geo.Format.JSON).write(a),c.target=
a;if(b)b=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polyline(b),a=(new Geo.Format.JSON).write(b),c.reshaper=a;this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/reshape",params:c,callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);d({geometry:a})},errback:e})},simplify:function(a,b,c,d){a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a);a=(new Geo.Format.JSON).write(a);this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/simplify",params:{sr:b||4326,geometries:a},callback:function(a){a=
Geo.Analysis.Util.esriObjToGeoGeometry(a);c({geometries:a})},errback:d})},trimExtend:function(a,b,c){a=a.toJson();this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/trimExtend",params:a,callback:function(a){a.geometryType="esriGeometryPolyline";a=Geo.Analysis.Util.esriObjToGeoGeometry(a);b({geometries:a})},errback:c})},union:function(a,b,c,d){a=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(a);a=(new Geo.Format.JSON).write(a);this._request=Geo.Analysis.Util.sendRequest({url:this.url+"/union",
params:{sr:b||4326,geometries:a},callback:function(a){a=Geo.Analysis.Util.esriObjToGeoGeometry(a);c({geometry:a})},errback:d})},onAreasAndLengthsComplete:function(){},onAutoCompleteComplete:function(){},onBufferComplete:function(){},onConvexHullComplete:function(){},onCutComplete:function(){},onDifferenceComplete:function(){},onDistanceComplete:function(){},onError:function(){},onGeneralizeComplete:function(){},onIntersectComplete:function(){},onLabelPointsComplete:function(){},onLengthsComplete:function(){},
onOffsetComplete:function(){},onProjectComplete:function(){},onRelationComplete:function(){},onReshapeComplete:function(){},onSimplifyComplete:function(){},onTrimExtendComplete:function(){},onUnionComplete:function(){}});
Geo.Util.extend(Geo.Analysis.GeometryService,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,
UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,
UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,
UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});
Geo.Analysis.LengthsParameters=Geo.Class({calculationType:null,geodesic:null,lengthUnit:null,polylines:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){for(var a={sr:this.inSr},b=this.polylines,c=[],d=0;d<b.length;d++){var e=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polyline(b[d]);c.push(e)}b=(new Geo.Format.JSON).write(c);a.polylines=b;if(this.lengthUnit)a.lengthUnit=this.lengthUnit;if(this.geodesic)a.geodesic=this.geodesic;if(this.calculationType)a.calculationType=
this.calculationType;return a}});
Geo.Analysis.OffsetParameters=Geo.Class({bevelRatio:null,geometries:null,offsetDistance:null,offsetHow:null,offsetUnit:null,inSR:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={sr:this.inSR};if(this.geometries&&this.geometries.length>0){var b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries,this.inSR),b=(new Geo.Format.JSON).write(b);a.geometries=b}if(this.bevelRatio)a.bevelRatio=this.bevelRatio;if(this.offsetDistance)a.offsetDistance=this.offsetDistance;
if(this.offsetHow)a.offsetHow=this.offsetHow;if(this.offsetUnit)a.offsetUnit=this.offsetUnit;return a}});Geo.Analysis.OffsetParameters.OFFSET_BEVELLED="esriGeometryOffsetBevelled";Geo.Analysis.OffsetParameters.OFFSET_MITERED="esriGeometryOffsetMitered";Geo.Analysis.OffsetParameters.OFFSET_ROUNDED="esriGeometryOffsetRounded";
Geo.Analysis.ProjectParameters=Geo.Class({geometries:null,inSR:null,outSR:null,transformation:null,transformationForward:null,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={};a.outSR=this.outSR;a.inSR=this.inSR;var b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries),b=(new Geo.Format.JSON).write(b);a.geometries=b;if(this.transformation)a.transformation=this.transformation;if(this.transformForward!==void 0)a.transformForward=this.transformForward;return a}});
Geo.Analysis.RelationParameters=Geo.Class({geometries1:null,geometries2:null,relation:null,relationParam:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={sr:this.inSr};if(this.geometries1){var b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries1),b=(new Geo.Format.JSON).write(b);a.geometries1=b}if(this.geometries2)b=Geo.Analysis.Util.geoGeometryAndTypeToEsriObj(this.geometries2),b=(new Geo.Format.JSON).write(b),a.geometries2=b;if(this.relation)a.relation=
this.relation;if(this.relationParam)a.relationParam=this.relationParam;return a}});
Geo.Util.extend(Geo.Analysis.RelationParameters,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",
SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});
Geo.Analysis.TrimExtendParameters=Geo.Class({extendHow:null,polylines:null,trimExtendTo:null,inSr:4326,initialize:function(a){Geo.Util.extend(this,a)},toJson:function(){var a={sr:this.inSr};if(this.extendHow)a.extendHow=this.extendHow;if(this.polylines){for(var b=[],c=0;c<this.polylines.length;c++){var d=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polyline(this.polylines[c]);b.push(d)}b=(new Geo.Format.JSON).write(b);a.polylines=b}if(this.trimExtendTo)b=Geo.Analysis.Util.geoGeometryToEsriObjMapping.polyline(this.trimExtendTo),
b=(new Geo.Format.JSON).write(b),a.trimExtendTo=b;return a}});
Geo.Analysis.Util={createSRByWkid:function(a){return{wkid:a}},isFeaturesArray:function(a){return Geo.Util.isArray(a)&&a[0].CLASS_NAME=="OpenLayers.Feature.Vector"?!0:!1},geoFeaturesToEsriFeatures:function(a,b){var c=null;if(a&&a.length>=1)for(var d=a[0].geometry.CLASS_NAME,c={geometryType:Geo.Analysis.Util.esriFullGeometryTypeMapping[d],features:[],sr:Geo.Analysis.Util.createSRByWkid(b)},e=0;e<a.length;e++){var f={geometry:Geo.Analysis.Util.geoGeometryToEsriObjMapping[Geo.Analysis.Util.geoGeometryToEsriMapping[d]](a[e].geometry),spatialReference:Geo.Analysis.Util.createSRByWkid(b)};
c.features.push(f)}return c},esriFeaturesToGeoFeatures:function(a,b){var c=null;if(a&&Geo.Util.isArray(a))for(var c=[],d=0;d<a.length;d++){var e=a[d],f,g;e.geometry&&(f=Geo.Analysis.Util.esriObjToGeoGeometryMapping[b](e.geometry));e.attributes&&(g=Geo.Util.extend({},e.attributes));e=new Geo.Feature.Vector(f,g);c.push(e)}return c},geoFeaturesToEsriObj:function(a){var b=null;if(a&&Geo.Util.isArray(a))for(var b=[],c=0;c<a.length;c++){var d=a[c],e={};d.geometry&&(e.geometry=Geo.Analysis.Util.geoGeometryToEsriObj(d.geometry));
d.attributes&&(e.attributes=Geo.Util.extend({},d.attributes));b.push(e)}return b},esriObjToGeoGeometry:function(a){if(a&&a.geometries){for(var b=[],c=0;c<a.geometries.length;c++)b.push(Geo.Analysis.Util.esriObjToGeoGeometryMapping[a.geometryType](a.geometries[c]));return b}if(a&&a.geometry)return Geo.Analysis.Util.esriObjToGeoGeometryMapping[a.geometryType](a.geometry)},geoGeometryToEsriObj:function(a){var b=null;a&&a.CLASS_NAME&&(b=Geo.Analysis.Util.geoGeometryToEsriObjMapping[Geo.Analysis.Util.geoGeometryToEsriMapping[a.CLASS_NAME]](a));
return b},esriFullGeometryTypeToGeoMapping:{esriGeometryPoint:OpenLayers.Geometry.Point,esriGeometryPolygon:OpenLayers.Geometry.Polygon},geoGeometryToEsriMapping:{"OpenLayers.Geometry.Point":"point","OpenLayers.Geometry.LineString":"polyline","OpenLayers.Geometry.MultiLineString":"polyline","OpenLayers.Geometry.Polygon":"polygon"},esriFullGeometryTypeMapping:{"OpenLayers.Geometry.Point":"esriGeometryPoint","OpenLayers.Geometry.Polygon":"esriGeometryPolygon","OpenLayers.Geometry.LineString":"esriGeometryPolyline"},
geoGeometryAndTypeToEsriObj:function(a,b){var c={};b&&(c.spatialReference={wkid:b});if(Geo.Util.isArray(a)){for(var d=[],e=0;e<a.length;e++)d.push(Geo.Analysis.Util.geoGeometryToEsriObj(a[e]));c.geometryType=Geo.Analysis.Util.esriFullGeometryTypeMapping[a[0].CLASS_NAME];c.geometries=d}else c.geometryType=Geo.Analysis.Util.esriFullGeometryTypeMapping[a.CLASS_NAME],c.geometry=Geo.Analysis.Util.geoGeometryToEsriObj(a);return c},esriObjToGeoGeometryMapping:{point:function(a){return new Geo.Geometry.Point(a.x,
a.y)},esriGeometryPoint:function(a){return new Geo.Geometry.Point(a.x,a.y)},coordinate:function(a){return new Geo.Geometry.Point(a[0],a[1])},path:function(a){for(var b=[],c=0;c<a.length;c++){var d=null;try{d=Geo.Analysis.Util.esriObjToGeoGeometryMapping.coordinate(a[c]),b.push(d)}catch(e){}}return olLineString=new Geo.Geometry.LineString(b)},ring:function(a){var b=null,b=null;try{b=Geo.Analysis.Util.esriObjToGeoGeometryMapping.path(a)}catch(c){throw OpenLayers.Console.error(c.toString()),c;}return b=
new Geo.Geometry.LinearRing(b.components)},polyline:function(a){for(var b=null,a=a.paths,b=[],c=0;c<a.length;c++)try{var d=Geo.Analysis.Util.esriObjToGeoGeometryMapping.path(a[c]);b.push(d)}catch(e){throw OpenLayers.Console.error(e.toString()),e;}return b=new Geo.Geometry.MultiLineString(b)},esriGeometryPolyline:function(a){for(var b=null,a=a.paths,b=[],c=0;c<a.length;c++)try{var d=Geo.Analysis.Util.esriObjToGeoGeometryMapping.path(a[c]);b.push(d)}catch(e){throw OpenLayers.Console.error(e.toString()),
e;}return b=new Geo.Geometry.MultiLineString(b)},polygon:function(a){for(var b=null,a=a.rings,b=[],c=0;c<a.length;c++)try{var d=Geo.Analysis.Util.esriObjToGeoGeometryMapping.ring(a[c]);b.push(d)}catch(e){throw OpenLayers.Console.error(e.toString()),e;}return b=new Geo.Geometry.Polygon(b)},esriGeometryPolygon:function(a){for(var b=null,a=a.rings,b=[],c=0;c<a.length;c++)try{var d=Geo.Analysis.Util.esriObjToGeoGeometryMapping.ring(a[c]);b.push(d)}catch(e){throw OpenLayers.Console.error(e.toString()),
e;}return b=new Geo.Geometry.Polygon(b)},multipoint:function(a){for(var b=[],a=a.points,c=0;c<a.length;c++)try{var d=Geo.Analysis.Util.esriObjToGeoGeometryMapping.coordinate(a[c]);b.push(d)}catch(e){throw OpenLayers.Console.error(e.toString()),e;}return b},extent:function(a){return new Geo.Bounds(a.xmin,a.ymin,a.xmax,a.ymax)}},geoGeometryToEsriObjMapping:{point:function(a){return{x:a.x,y:a.y}},coordinate:function(a){return[a.x,a.y]},path:function(a){for(var b=[],c=0;c<a.components.length;c++){var d=
Geo.Analysis.Util.geoGeometryToEsriObjMapping.coordinate(a.components[c]);b.push(d)}return b},linearring:function(a){for(var b=[],c=0;c<a.components.length;c++){var d=Geo.Analysis.Util.geoGeometryToEsriObjMapping.coordinate(a.components[c]);b.push(d)}return b},polyline:function(a){var b={paths:[]};if(a instanceof Geo.Geometry.LineString){var c=Geo.Analysis.Util.geoGeometryToEsriObjMapping.path(a);b.paths.push(c)}if(a instanceof Geo.Geometry.MultiLineString)for(var d=0;d<a.components.length;d++)c=
Geo.Analysis.Util.geoGeometryToEsriObjMapping.path(a.components[d]),b.paths.push(c);return b},polygon:function(a){for(var b={rings:[]},c=0;c<a.components.length;c++){var d=Geo.Analysis.Util.geoGeometryToEsriObjMapping.linearring(a.components[c]);b.rings.push(d)}return b},extent:function(a){return{xmin:a.left,ymin:a.bottom,xmax:a.right,ymax:a.top}}},projection2ErsiObj:function(a){return{wkid:a}},appendProjectionToEsriGeometry:function(a,b){var c=Geo.Analysis.Util.projection2ErsiObj(b);return Geo.Util.extend(a,
c)},appendTypeToEsriGeometrys:function(a,b){var c=Geo.Analysis.Util.projection2ErsiObj(b);if(Geo.Util.isArray(a))return Geo.Util.extend(geometry,c)},sendRequest:function(a){var b=a.url,c=a.params,d=a.callback,a=a.errback,c=Geo.Util.applyDefaults(c,{f:"json"}),c=Geo.Util.getParameterString(c);return new Geo.Request.POST({url:b,success:function(a){a=(new Geo.Format.JSON).read(a.responseText);d&&d(a)},failure:a,data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}};
